# Invoice Management System - Developer Documentation

**Version:** 1.0.0  
**Last Updated:** October 2025  
**Tech Stack:** Next.js 14, MongoDB, WebAuthn, TypeScript

---

## Table of Contents

1. [Project Overview](#project-overview)
2. [Architecture](#architecture)
3. [Technology Stack](#technology-stack)
4. [Project Structure](#project-structure)
5. [Setup & Installation](#setup--installation)
6. [Database Schema](#database-schema)
7. [API Reference](#api-reference)
8. [Authentication Flow](#authentication-flow)
9. [Component Library](#component-library)
10. [PDF Generation](#pdf-generation)
11. [Security](#security)
12. [Deployment](#deployment)
13. [Testing](#testing)
14. [Troubleshooting](#troubleshooting)
15. [Contributing](#contributing)

---

## Project Overview

### Purpose
A secure, self-hosted invoice management system with WebAuthn-based digital signatures, GST compliance, and PDF generation capabilities.

### Key Features
- ✅ WebAuthn (FIDO2) passwordless authentication
- ✅ GST-compliant invoice generation
- ✅ Digital signature with image upload
- ✅ PDF generation with cryptographic verification
- ✅ Role-based access control (Admin/User)
- ✅ Complete audit logging
- ✅ Offline-first design (no cloud dependencies)

### Target Users
- Small businesses requiring GST-compliant invoicing
- Freelancers and consultants
- Self-hosted desktop application users
- Organizations requiring complete data privacy

---

## Architecture

### High-Level Architecture

```
┌─────────────────────────────────────────────────────┐
│                   Client (Browser)                   │
│  ┌─────────────┐  ┌──────────────┐  ┌────────────┐ │
│  │   React UI  │  │  WebAuthn    │  │   Axios    │ │
│  │  (Next.js)  │  │   Client     │  │ (Fetch API)│ │
│  └─────────────┘  └──────────────┘  └────────────┘ │
└─────────────────────────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────┐
│              Next.js Server (Port 3000)              │
│  ┌──────────────────────────────────────────────┐  │
│  │           Middleware (Auth Check)             │  │
│  └──────────────────────────────────────────────┘  │
│  ┌──────────────┐  ┌──────────────┐              │
│  │  API Routes  │  │  SSR Pages   │              │
│  │              │  │              │              │
│  │ • Auth       │  │ • Dashboard  │              │
│  │ • Invoices   │  │ • Settings   │              │
│  │ • PDF        │  │ • Profile    │              │
│  │ • Logs       │  │              │              │
│  └──────────────┘  └──────────────┘              │
└─────────────────────────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────┐
│           MongoDB (Port 27017)                       │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐         │
│  │  Users   │  │ Invoices │  │   Logs   │         │
│  └──────────┘  └──────────┘  └──────────┘         │
│  ┌──────────┐  ┌──────────┐                        │
│  │Signatures│  │ Settings │                        │
│  └──────────┘  └──────────┘                        │
└─────────────────────────────────────────────────────┘
```

### Data Flow

```
User Action → Middleware → API Route → Database → Response
                    ↓
            JWT Validation
            WebAuthn Verification
            Logging
```

---

## Technology Stack

### Core Technologies

| Technology | Version | Purpose |
|------------|---------|---------|
| Next.js | 14.x | Full-stack React framework |
| React | 18.x | UI library |
| TypeScript | 5.x | Type safety |
| MongoDB | 5.x+ | Database |
| Mongoose | 8.x | ODM for MongoDB |

### Authentication & Security

| Technology | Version | Purpose |
|------------|---------|---------|
| @simplewebauthn/server | 9.x | WebAuthn server implementation |
| @simplewebauthn/browser | 9.x | WebAuthn client implementation |
| jsonwebtoken | 9.x | JWT token generation |
| bcrypt | 5.x | Password hashing |

### UI & Styling

| Technology | Version | Purpose |
|------------|---------|---------|
| Tailwind CSS | 3.x | Utility-first CSS |
| Shadcn UI | Latest | Component library |
| Radix UI | Latest | Headless UI primitives |
| Lucide React | Latest | Icon library |

### PDF & File Processing

| Technology | Version | Purpose |
|------------|---------|---------|
| pdf-lib | 1.17.x | PDF generation |
| fs/promises | Node.js | File system operations |

### Validation & Utilities

| Technology | Version | Purpose |
|------------|---------|---------|
| Zod | 3.x | Schema validation |
| class-variance-authority | Latest | CSS variant management |
| clsx | Latest | Conditional className joining |
| tailwind-merge | Latest | Tailwind class merging |

---

## Project Structure

```
invoice-system/
│
├── app/                              # Next.js App Router
│   ├── (auth)/                       # Authentication routes (no layout)
│   │   ├── login/
│   │   │   └── page.tsx             # Login page
│   │   └── register/
│   │       └── page.tsx             # Registration page
│   │
│   ├── (dashboard)/                  # Protected routes (with layout)
│   │   ├── layout.tsx               # Dashboard navigation layout
│   │   ├── dashboard/
│   │   │   └── page.tsx             # Main dashboard
│   │   ├── invoices/
│   │   │   ├── page.tsx             # Invoice list
│   │   │   ├── new/
│   │   │   │   └── page.tsx         # Create invoice
│   │   │   └── [id]/
│   │   │       ├── page.tsx         # Invoice detail
│   │   │       └── edit/
│   │   │           └── page.tsx     # Edit invoice
│   │   ├── settings/
│   │   │   └── page.tsx             # Company settings
│   │   ├── profile/
│   │   │   └── page.tsx             # User profile
│   │   ├── logs/
│   │   │   └── page.tsx             # System logs (admin)
│   │   └── diagnostics/
│   │       └── page.tsx             # PDF diagnostics
│   │
│   ├── api/                          # API Routes
│   │   ├── auth/
│   │   │   ├── register/route.ts    # User registration
│   │   │   ├── login/route.ts       # User login
│   │   │   └── challenge/route.ts   # WebAuthn challenge
│   │   ├── invoices/
│   │   │   ├── route.ts             # List/Create invoices
│   │   │   └── [id]/
│   │   │       ├── route.ts         # Get/Update/Delete invoice
│   │   │       └── sign/route.ts    # Sign invoice
│   │   ├── pdf/
│   │   │   └── [id]/route.ts        # Download PDF
│   │   ├── logs/
│   │   │   └── route.ts             # System logs
│   │   ├── settings/
│   │   │   └── route.ts             # Company settings
│   │   ├── user/
│   │   │   ├── profile/route.ts     # User profile
│   │   │   └── signature/route.ts   # Signature upload
│   │   ├── test-pdf/route.ts        # PDF generation test
│   │   └── list-pdfs/route.ts       # List PDF files
│   │
│   ├── layout.tsx                    # Root layout
│   ├── page.tsx                      # Landing page
│   ├── not-found.tsx                 # 404 page
│   ├── error.tsx                     # Error page
│   ├── loading.tsx                   # Loading page
│   └── globals.css                   # Global styles
│
├── components/                       # React components
│   ├── ui/                          # Shadcn UI components
│   │   ├── button.tsx
│   │   ├── card.tsx
│   │   ├── dialog.tsx
│   │   ├── input.tsx
│   │   ├── label.tsx
│   │   ├── table.tsx
│   │   ├── alert.tsx
│   │   ├── badge.tsx
│   │   ├── radio-group.tsx
│   │   └── dropdown-menu.tsx
│   │
│   ├── invoice-form.tsx             # Invoice form component
│   ├── invoice-table.tsx            # Invoice table component
│   ├── sign-invoice-dialog.tsx      # Sign dialog component
│   ├── delete-invoice-dialog.tsx    # Delete dialog component
│   ├── signature-upload.tsx         # Signature upload component
│   ├── error-boundary.tsx           # Error boundary component
│   └── toaster.tsx                  # Toast notifications
│
├── lib/                              # Utility libraries
│   ├── db.ts                        # MongoDB connection
│   ├── utils.ts                     # Utility functions (cn)
│   └── webauthn.ts                  # WebAuthn helpers
│
├── models/                           # Mongoose models
│   ├── User.ts                      # User schema
│   ├── Invoice.ts                   # Invoice schema
│   ├── Signature.ts                 # Signature schema
│   ├── Log.ts                       # Log schema
│   └── Setting.ts                   # Settings schema
│
├── utils/                            # Helper functions
│   ├── logger.ts                    # Logging utilities
│   └── pdf.ts                       # PDF generation
│
├── hooks/                            # Custom React hooks
│   └── use-toast.ts                 # Toast hook
│
├── types/                            # TypeScript types
│   └── global.d.ts                  # Global type declarations
│
├── public/                           # Static assets
│   ├── pdfs/                        # Generated PDFs
│   └── signatures/                  # Uploaded signatures
│
├── scripts/                          # Utility scripts
│   ├── start-desktop.js             # Desktop startup script
│   ├── setup.js                     # Setup script
│   └── backup.js                    # Backup script
│
├── middleware.ts                     # Next.js middleware
├── next.config.js                    # Next.js configuration
├── tailwind.config.js                # Tailwind configuration
├── tsconfig.json                     # TypeScript configuration
├── package.json                      # Dependencies
├── .env.local                        # Environment variables
├── .env.example                      # Environment template
├── .gitignore                        # Git ignore rules
└── README.md                         # User documentation
```

---

## Setup & Installation

### Prerequisites

- **Node.js** 18.x or higher
- **MongoDB** 5.0 or higher
- **npm** 9.x or higher
- Modern browser with WebAuthn support

### Step-by-Step Installation

#### 1. Clone Repository

```bash
git clone <repository-url>
cd invoice-system
```

#### 2. Install Dependencies

```bash
npm install
```

#### 3. Setup Environment

```bash
cp .env.example .env.local
```

Edit `.env.local`:

```env
# Database
MONGODB_URI=mongodb://localhost:27017/invoice_system

# Authentication (Generate secure key!)
JWT_SECRET=<generate-random-32-char-string>

# WebAuthn Configuration
RP_NAME=Invoice Management System
RP_ID=localhost
ORIGIN=http://localhost:3000

# Environment
NODE_ENV=development
```

**Generate JWT Secret:**
```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

#### 4. Create Required Directories

```bash
mkdir -p public/pdfs
mkdir -p public/signatures
mkdir -p data/db
mkdir -p data/backups
```

#### 5. Start MongoDB

```bash
# Local installation
mongod --dbpath ./data/db

# Or with Docker
docker run -d -p 27017:27017 --name mongodb mongo:latest
```

#### 6. Run Development Server

```bash
npm run dev
```

#### 7. Access Application

Open browser: `http://localhost:3000`

### Production Build

```bash
npm run build
npm start
```

---

## Database Schema

### Collections Overview

```
invoice_system
├── users              # User accounts
├── invoices           # Invoice records
├── signatures         # Digital signatures
├── logs               # Audit logs
└── settings           # Company settings
```

### User Schema

```typescript
interface IUser {
  _id: ObjectId;
  name: string;                    // Full name
  email: string;                   // Email (unique)
  passwordHash: string;            // Bcrypt hash
  role: 'admin' | 'user';         // Access level
  webAuthnCredential?: {           // WebAuthn data
    credentialID: string;          // Base64 credential ID
    credentialPublicKey: string;   // Base64 public key
    counter: number;               // Replay attack prevention
    transports?: string[];         // Device transports
  };
  signatureImageUrl?: string;      // Digital signature path
  createdAt: Date;
  updatedAt: Date;
}
```

**Indexes:**
- `email`: unique

**Example:**
```javascript
{
  "_id": ObjectId("..."),
  "name": "John Doe",
  "email": "john@example.com",
  "passwordHash": "$2b$10$...",
  "role": "admin",
  "webAuthnCredential": {
    "credentialID": "AaFdkcw4Su...",
    "credentialPublicKey": "pQECAy...",
    "counter": 5,
    "transports": ["usb", "nfc"]
  },
  "signatureImageUrl": "/signatures/signature-123.png",
  "createdAt": ISODate("2025-01-01T00:00:00Z"),
  "updatedAt": ISODate("2025-01-01T00:00:00Z")
}
```

### Invoice Schema

```typescript
interface IInvoice {
  _id: ObjectId;
  invoiceNumber: string;           // User-defined (unique)
  orderReferenceNumber?: string;   // PO/Order reference
  createdBy: ObjectId;             // User reference
  
  // Client information
  clientName: string;
  clientEmail: string;
  clientAddress: string;
  clientGSTNumber?: string;        // 15-char GSTIN
  
  // Line items
  lineItems: Array<{
    description: string;
    hsnCode: string;               // HSN/SAC code
    quantity: number;
    rate: number;
    total: number;
  }>;
  
  // Tax calculation
  subtotal: number;
  taxType: 'IGST' | 'CGST_SGST';
  igst?: number;                   // 18% inter-state
  cgst?: number;                   // 9% intra-state
  sgst?: number;                   // 9% intra-state
  totalTax: number;
  discount: number;
  grandTotal: number;
  
  // Status and signing
  status: 'draft' | 'signed' | 'cancelled';
  signedBy?: ObjectId;             // User reference
  signedAt?: Date;
  signatureId?: ObjectId;          // Signature reference
  signatureImageUrl?: string;      // Signature image path
  pdfUrl?: string;                 // Generated PDF path
  
  createdAt: Date;
  updatedAt: Date;
}
```

**Indexes:**
- `invoiceNumber`: unique
- `createdBy`: 1
- `status`: 1

**Example:**
```javascript
{
  "_id": ObjectId("..."),
  "invoiceNumber": "INV-2025-001",
  "orderReferenceNumber": "PO-2024-123",
  "createdBy": ObjectId("..."),
  "clientName": "Acme Corp",
  "clientEmail": "client@acme.com",
  "clientAddress": "123 Business St",
  "clientGSTNumber": "22AAAAA0000A1Z5",
  "lineItems": [
    {
      "description": "Web Development",
      "hsnCode": "9954",
      "quantity": 1,
      "rate": 50000,
      "total": 50000
    }
  ],
  "subtotal": 50000,
  "taxType": "CGST_SGST",
  "cgst": 4500,
  "sgst": 4500,
  "totalTax": 9000,
  "discount": 0,
  "grandTotal": 59000,
  "status": "signed",
  "signedBy": ObjectId("..."),
  "signedAt": ISODate("2025-01-15T10:00:00Z"),
  "signatureId": ObjectId("..."),
  "pdfUrl": "/pdfs/INV-2025-001.pdf",
  "createdAt": ISODate("2025-01-15T09:00:00Z"),
  "updatedAt": ISODate("2025-01-15T10:00:00Z")
}
```

### Signature Schema

```typescript
interface ISignature {
  _id: ObjectId;
  userId: ObjectId;                // User reference
  invoiceId: ObjectId;             // Invoice reference
  webAuthnChallengeId: string;     // Challenge used
  verified: boolean;               // Verification status
  verifiedAt?: Date;               // Verification timestamp
  signatureText: string;           // Display text
  timestamp: Date;                 // Signing timestamp
  createdAt: Date;
}
```

**Indexes:**
- `invoiceId`: 1
- `userId`: 1

### Log Schema

```typescript
interface ILog {
  _id: ObjectId;
  userId?: ObjectId;               // User reference
  action: string;                  // Action type
  entity: string;                  // Entity type
  entityId?: string;               // Entity ID
  description: string;             // Human-readable description
  ipAddress?: string;              // Client IP
  createdAt: Date;
}
```

**Indexes:**
- `action`: 1
- `userId`: 1
- `createdAt`: -1 (descending)

**Common Actions:**
- LOGIN_SUCCESS
- LOGIN_FAILED
- INVOICE_CREATED
- INVOICE_SIGNED
- PDF_GENERATED

### Setting Schema

```typescript
interface ISetting {
  _id: ObjectId;
  companyName: string;
  companyAddress: string;
  companyEmail: string;
  companyPhone: string;
  logoUrl?: string;
  invoicePrefix: string;           // e.g., "INV"
  taxRate: number;                 // Default tax rate
  termsText: string;               // Terms & conditions
  createdAt: Date;
  updatedAt: Date;
}
```

**Note:** Only one document should exist (singleton pattern)

---

## API Reference

### Authentication APIs

#### POST `/api/auth/register`

Register a new user with WebAuthn.

**Step 1: Initialize**

```typescript
// Request
POST /api/auth/register
Content-Type: application/json

{
  "step": "init",
  "name": "John Doe",
  "email": "john@example.com",
  "password": "SecurePass123!",
  "role": "user"  // or "admin"
}

// Response (200)
{
  "userId": "507f1f77bcf86cd799439011",
  "options": {
    "challenge": "base64_challenge",
    "rp": { "name": "Invoice System", "id": "localhost" },
    "user": {
      "id": "base64_user_id",
      "name": "john@example.com",
      "displayName": "John Doe"
    },
    "pubKeyCredParams": [...],
    "timeout": 60000,
    "attestation": "none"
  }
}
```

**Step 2: Verify**

```typescript
// Request
POST /api/auth/register
Content-Type: application/json

{
  "step": "verify",
  "userId": "507f1f77bcf86cd799439011",
  "credential": {
    // WebAuthn credential response
  }
}

// Response (200)
{
  "success": true,
  "user": {
    "id": "507f1f77bcf86cd799439011",
    "name": "John Doe",
    "email": "john@example.com"
  }
}
```

**Errors:**
- `400`: Invalid input or user already exists
- `401`: Verification failed

---

#### POST `/api/auth/login`

Login with WebAuthn.

**Step 1: Initialize**

```typescript
// Request
POST /api/auth/login
Content-Type: application/json

{
  "step": "init",
  "email": "john@example.com"
}

// Response (200)
{
  "userId": "507f1f77bcf86cd799439011",
  "options": {
    "challenge": "base64_challenge",
    "timeout": 60000,
    "rpId": "localhost"
  },
  "credentialId": "base64_credential_id"
}
```

**Step 2: Verify**

```typescript
// Request
POST /api/auth/login
Content-Type: application/json

{
  "step": "verify",
  "userId": "507f1f77bcf86cd799439011",
  "credential": {
    // WebAuthn authentication response
  }
}

// Response (200)
// Sets auth-token cookie
{
  "success": true,
  "user": {
    "id": "507f1f77bcf86cd799439011",
    "name": "John Doe",
    "email": "john@example.com",
    "role": "admin"
  }
}
```

**Errors:**
- `401`: Invalid credentials
- `400`: Invalid input

---

### Invoice APIs

#### GET `/api/invoices`

List all invoices for the authenticated user.

```typescript
// Request
GET /api/invoices?status=draft&page=1&limit=20
Cookie: auth-token=<jwt>

// Response (200)
{
  "invoices": [
    {
      "_id": "...",
      "invoiceNumber": "INV-2025-001",
      "clientName": "Acme Corp",
      "grandTotal": 59000,
      "status": "signed",
      "createdAt": "2025-01-15T09:00:00Z",
      "createdBy": { "name": "John Doe", "email": "john@example.com" }
    }
  ]
}
```

**Query Parameters:**
- `status`: Filter by status (draft, signed, cancelled)
- `page`: Page number (default: 1)
- `limit`: Items per page (default: 20)

---

#### POST `/api/invoices`

Create a new invoice.

```typescript
// Request
POST /api/invoices
Content-Type: application/json
Cookie: auth-token=<jwt>

{
  "invoiceNumber": "INV-2025-001",
  "orderReferenceNumber": "PO-123",
  "clientName": "Acme Corp",
  "clientEmail": "client@acme.com",
  "clientAddress": "123 Business St",
  "clientGSTNumber": "22AAAAA0000A1Z5",
  "lineItems": [
    {
      "description": "Web Development",
      "hsnCode": "9954",
      "quantity": 1,
      "rate": 50000,
      "total": 50000
    }
  ],
  "taxType": "CGST_SGST",
  "discount": 0
}

// Response (201)
{
  "invoice": {
    "_id": "...",
    "invoiceNumber": "INV-2025-001",
    // ... full invoice object
  }
}
```

**Errors:**
- `400`: Invalid input or invoice number exists
- `401`: Unauthorized

---

#### GET `/api/invoices/[id]`

Get invoice details.

```typescript
// Request
GET /api/invoices/507f1f77bcf86cd799439011
Cookie: auth-token=<jwt>

// Response (200)
{
  "invoice": {
    // ... full invoice object with populated references
  }
}
```

---

#### PUT `/api/invoices/[id]`

Update an invoice (only drafts).

```typescript
// Request
PUT /api/invoices/507f1f77bcf86cd799439011
Content-Type: application/json
Cookie: auth-token=<jwt>

{
  "clientName": "Updated Name",
  "lineItems": [...]
  // ... fields to update
}

// Response (200)
{
  "invoice": {
    // ... updated invoice object
  }
}
```

**Errors:**
- `400`: Cannot update signed invoices
- `403`: Not authorized
- `404`: Invoice not found

---

#### DELETE `/api/invoices/[id]`

Delete an invoice (admin only).

```typescript
// Request
DELETE /api/invoices/507f1f77bcf86cd799439011
Cookie: auth-token=<jwt>

// Response (200)
{
  "success": true
}
```

**Errors:**
- `403`: Admin access required
- `404`: Invoice not found

---

#### POST `/api/invoices/[id]/sign`

Sign an invoice with WebAuthn.

**Step 1: Initialize**

```typescript
// Request
POST /api/invoices/507f1f77bcf86cd799439011/sign
Content-Type: application/json
Cookie: auth-token=<jwt>

{
  "step": "init"
}

// Response (200)
{
  "success": true,
  "signatureId": "...",
  "options": {
    "challenge": "...",
    // WebAuthn options
  },
  "credentialId": "..."
}
```

**Step 2: Verify and Complete**

```typescript
// Request
POST /api/invoices/507f1f77bcf86cd799439011/sign
Content-Type: application/json
Cookie: auth-token=<jwt>

{
  "step": "verify",
  "signatureId": "...",
  "credential": {
    // WebAuthn response
  }
}

// Response (200)
{
  "success": true,
  "message": "Invoice signed successfully",
  "invoice": {
    "id": "...",
    "invoiceNumber": "INV-2025-001",
    "status": "signed",
    "pdfUrl": "/pdfs/INV-2025-001.pdf",
    "signedAt": "...",
    "signedBy": {...}
  }
}
```

---

### PDF APIs

#### GET `/api/pdf/[id]`

Download invoice PDF.

```typescript
// Request
GET /api/pdf/507f1f77bcf86cd799439011
Cookie: auth-token=<jwt>

// Response (200)
Content-Type: application/pdf
Content-Disposition: attachment; filename="INV-2025-001.pdf"

<PDF binary data>
```

**Errors:**
- `400`: PDF not available (invoice not signed)
- `404`: PDF file not found
- `403`: Not authorized

---

### Settings APIs

#### GET `/api/settings`

Get company settings.

```typescript
// Request
GET /api/settings
Cookie: auth-token=<jwt>

// Response (200)
{
  "settings": {
    "companyName": "Your Company",
    "companyAddress": "...",
    "companyEmail": "...",
    "companyPhone": "...",
    "invoicePrefix": "INV",
    "taxRate": 0,
    "termsText": "..."
  }
}
```

---

#### PUT `/api/settings`

Update company settings (admin only).

```typescript
// Request
PUT /api/settings
Content-Type: application/json
Cookie: auth-token=<jwt>

{
  "companyName": "Updated Company Name",
  "companyAddress": "...",
  // ... fields to update
}

// Response (200)
{
  "settings": {
    // ... updated settings
  }
}
```

**Errors:**
- `403`: Admin access required

---

### User APIs

#### GET `/api/user/profile`

Get current user profile.

```typescript
// Request
GET /api/user/profile
Cookie: auth-token=<jwt>

// Response (200)
{
  "user": {
    "id": "...",
    "name": "John Doe",
    "email": "john@example.com",
    "role": "admin",
    "hasWebAuthn": true,
    "createdAt": "...",
    "updatedAt": "..."
  }
}
```

---

#### PUT `/api/user/profile`

Update user profile.

```typescript
// Request
PUT /api/user/profile
Content-Type: application/json
Cookie: auth-token=<jwt>

{
  "name": "Updated Name",
  "email": "newemail@example.com",
  "currentPassword": "old_password",  // Required for password change
  "newPassword": "new_password"       // Optional
}

// Response (200)
{
  "message": "Profile updated successfully",
  "user": {
    "id": "...",
    "name": "Updated Name",
    "email": "newemail@example.com",
    "role": "admin"
  }
}
```

---

#### POST `/api/user/signature`

Upload digital signature image.

```typescript
// Request
POST /api/user/signature
Content-Type: multipart/form-data
Cookie: auth-token=<jwt>

FormData:
  signature: <File> (image/png, image/jpeg, max 2MB)

// Response (200)
{
  "success": true,
  "signatureUrl": "/signatures/signature-123.png"
}
```

**Errors:**
- `400`: Invalid file type or size
- `401`: Unauthorized

---

#### GET `/api/user/signature`

Get current signature URL.

```typescript
// Request
GET /api/user/signature
Cookie: auth-token=<jwt>

// Response (200)
{
  "signatureUrl": "/signatures/signature-123.png"
}
```

---

### Logs APIs

#### GET `/api/logs`

Get system logs (admin only).

```typescript
// Request
GET /api/logs?page=1&limit=50&action=